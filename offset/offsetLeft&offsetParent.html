<body>
  <style>
      body { margin:0;  }
      .box1 { width:300px; height:300px; margin:100px; background:#333; overflow:hidden; position:relative;}
      .box2 { width:200px; height:200px; margin:100px; background:#666; overflow:hidden; position:relative;}
      .box3 { width:100px; height:100px; margin:100px; background:#999;}
  </style>
  <div class="box1">
      <div class="box2">
        <div class="box3"></div>
      </div>
  </div>
  <script>
      var oBox1 = document.querySelector('.box1');
      var oBox2 = document.querySelector('.box2');
      var oBox3 = document.querySelector('.box3');

      function offset (el, direction) {
        // 将top,left首字母大写,并拼接成offsetTop,offsetLeft
        let offsetDir = 'offset' + direction[0].toUpperCase() + direction.substring(1)
        let realNum = el[offsetDir]
        // 获取上一级定位元素对象
        let positionParent = el.offsetParent;

        while (positionParent != null) {
          realNum += positionParent[offsetDir]
          positionParent = positionParent.offsetParent
        }
        return realNum
      }
    
      // console.log('box1: '+ oBox1.offsetLeft +','+ oBox1.offsetTop);
      // console.log('box2: '+ oBox2.offsetLeft +','+ oBox2.offsetTop);
      // console.log('box3: '+ oBox3.offsetLeft +','+ oBox3.offsetTop);
      console.log('box1: '+ offset(oBox1,'left') +','+ offset(oBox1,'top'));
      console.log('box2: '+ offset(oBox2,'left') +','+ offset(oBox2,'top'));
      console.log('box3: '+ offset(oBox3,'left') +','+ offset(oBox3,'top'));

  </script>
  </body>